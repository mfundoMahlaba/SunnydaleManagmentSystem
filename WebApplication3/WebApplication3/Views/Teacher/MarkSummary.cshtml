@model List<WebApplication3.ViewModels.SubjectMarkSummaryViewModel>

@{
    ViewBag.Title = "Mark Summary";
}

<style>
    h4 {
        font-weight: 700;
        color: #212529;
    }

    label {
        font-weight: 600;
        margin-right: 0.5rem;
    }

    .form-control, .form-select {
        font-size: 0.95rem;
        border-radius: 0.375rem;
    }

    .btn {
        font-size: 0.9rem;
        font-weight: 500;
        border-radius: 0.375rem;
    }

    .btn-primary {
        padding: 0.45rem 1.25rem;
    }

    .table th, .table td {
        vertical-align: middle;
        font-size: 0.95rem;
        text-align: center;
    }

    .thead-dark th {
        background-color: #343a40;
        color: #fff;
    }

    .table-bordered {
        border: 1px solid #dee2e6;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #f8f9fa;
    }

    .card {
        border-radius: 0.5rem;
    }

    .container {
        padding-bottom: 2rem;
    }
</style>

<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h4 class="mb-0 text-dark fw-bold">📊 Mark Summary</h4>
            <a href="@Url.Action("Dashboard", "Teacher")" class="btn btn-outline-secondary">
                <i class="fas fa-home me-1"></i> Back to Dashboard
            </a>
        </div>
        <div class="card-body">
            <form method="get" action="@Url.Action("MarkSummary", "Teacher")" class="row g-3 align-items-center mb-4">
                <div class="col-auto">
                    <label for="term" class="form-label">Filter by Term:</label>
                </div>
                <div class="col-auto">
                    @Html.DropDownList("term", (IEnumerable<SelectListItem>)ViewBag.TermOptions, new { @class = "form-select" })
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-filter me-1"></i> Apply
                    </button>
                </div>
            </form>

            @if (!Model.Any())
            {
                <div class="alert alert-info">No mark summaries available for the selected term.</div>
            }
            else
            {
                <div class="table-responsive">
                    <table class="table table-bordered table-striped mb-0">
                        <thead class="thead-dark">
                            <tr>
                                <th>Subject</th>
                                <th>Grade</th>
                                <th>Term</th>
                                <th>Assessment Type</th>
                                <th>Total Students</th>
                                <th>Marks Captured</th>
                                <th>Average Mark</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var summary in Model)
                            {
                                <tr>
                                    <td>@summary.SubjectName</td>
                                    <td>@summary.GradeName</td>
                                    <td>@summary.Term</td>
                                    <td>@summary.AssessmentType</td>
                                    <td>@summary.TotalStudents</td>
                                    <td>@summary.MarksCaptured</td>
                                    <td>@summary.AverageMark.ToString("F1")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
    </div>
</div>
